function initialize(e){var t=wpsightMap.map;t.mapTypeId=google.maps.MapTypeId[wpsightMap.map.mapTypeId],t.mapTypeControl="true"===wpsightMap.map.mapTypeControl,t.scrollwheel="true"===wpsightMap.map.scrollwheel,t.streetViewControl="true"===wpsightMap.map.streetViewControl,IsJsonString(wpsightMap.map.styles)?t.styles=JSON.parse(wpsightMap.map.styles):t.styles=wpsightMap.map.styles;var o=wpsightMap.cluster;o.enableRetinaIcons="true"===wpsightMap.cluster.enableRetinaIcons;for(var i=document.getElementById(e),s=new google.maps.LatLngBounds,a=new google.maps.Map(i,t),n=[],l=function(e){return function(){for(var t=e.length-1;t>=0;t--)e[t].infobox.close();this.infobox.open(a,this)}},p=wpsightMap.map.markers.length-1;p>=0;p--){var r=wpsightMap.map.markers[p],g=new google.maps.Marker({title:r.title,position:new google.maps.LatLng(parseFloat(r.lat),parseFloat(r.lng)),map:a,icon:{url:r.icon.url,size:new google.maps.Size(parseInt(r.icon.size[0]),parseInt(r.icon.size[1])),origin:new google.maps.Point(parseInt(r.icon.origin[0]),parseInt(r.icon.origin[1])),anchor:new google.maps.Point(parseInt(r.icon.anchor[0]),parseInt(r.icon.anchor[1])),scaledSize:new google.maps.Size(parseInt(r.icon.scaledSize[0]),parseInt(r.icon.scaledSize[1]))}});g.infobox=new InfoBox({content:r.infobox.content,closeBoxURL:r.infobox.closeBoxURL,infoBoxClearance:new google.maps.Size(40,40),pixelOffset:new google.maps.Size(r.infobox.pixelOffset[0],r.infobox.pixelOffset[1])}),google.maps.event.addListener(g,t.infobox_event,l(n)),s.extend(g.position),n[p]=g}var h=[{textColor:o.styles[0].textColor,url:o.styles[0].url,height:parseInt(o.styles[0].height),width:parseInt(o.styles[0].width)},{textColor:o.styles[1].textColor,url:o.styles[1].url,height:parseInt(o.styles[1].height),width:parseInt(o.styles[1].width)},{textColor:o.styles[2].textColor,url:o.styles[2].url,height:parseInt(o.styles[2].height),width:parseInt(o.styles[2].width)},{textColor:o.styles[3].textColor,url:o.styles[3].url,height:parseInt(o.styles[3].height),width:parseInt(o.styles[3].width)},{textColor:o.styles[4].textColor,url:o.styles[4].url,height:parseInt(o.styles[4].height),width:parseInt(o.styles[4].width)}],c={gridSize:parseInt(o.gridSize),styles:h};new MarkerClusterer(a,n,c);a.fitBounds(s),a.panToBounds(s)}function IsJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}!function(e){var t=wpsightMap.map;"true"!=t.map_page&&(t.default_display?(e("#map-toggle-"+t.id).show(),e("#map-toggle-"+t.id+" .toggle-map").addClass("open"),initialize(t.id)):e("#map-toggle-"+t.id).hide(),e(".toggle-map").click((function(o){o.preventDefault(),e("#map-toggle-"+t.id).is(":visible")?(e.cookie(t.cookie,"closed",{expires:60,path:t.cookie_path}),e("#"+t.id).animate({opacity:"0"},100,(function(){e("#map-toggle-"+t.id+" .toggle-map").removeClass("open"),e("#map-toggle-"+t.id).slideUp(150)}))):e("#map-toggle-"+t.id).slideDown(150,(function(){e.cookie(t.cookie,"open",{expires:60,path:t.cookie_path}),e("#"+t.id).animate({opacity:"1"},100),initialize(t.id),e("#map-toggle-"+t.id+" .toggle-map").addClass("open")}))})));var o=e(".map-init").attr("id");void 0!==o&&o.length&&initialize(o)}(jQuery);